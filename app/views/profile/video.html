<ng-include src="'/views/shared-partials/navbar-back.html'"></ng-include>

<section class="activity-container">
  <article class="main">
    <header>
      <div class="thumb">
        <img ng-src="{{ cdnDomain }}/{{ video.user.thumbnail || imgPlaceholder }}" />
      </div>
      <h2>{{ video.user.name }}</h2>
      <span am-time-ago="video.created"></span>
      <div class="clearfix"></div>
    </header>

    <div class="media-wrapper video-view" ng-switch="video.type">
      <img ng-src="{{ cdnDomain }}/{{ video.media.thumbnail }}" ng-switch-when="file" show-media-video="{{ video.media.path }}" media-id="video-{{ video.id }}" media-type="{{ video.media.type }}" />
      <embed ng-switch-when="youtube" ng-src="{{ video.media.video_id | trustVideoURL:'youtube' }}" width="{{ mediaWidth }}" height="300" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true">
      <iframe ng-switch-when="vimeo" ng-src="{{ video.media.video_id | trustVideoURL:'vimeo' }}" width="{{ mediaWidth }}" height="300" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
      <a ng-href="{{ video.media.path }}" target="_blank" ng-switch-default>
        <img ng-src="{{ cdnDomain }}/{{ video.media.thumbnail }}" />
      </a>
    </div>

    <span class="stats">{{ video.stats.likes }} likes &bull; {{ video.comments.length }} comments</span>
    <hr />

    <div class="row" style="padding: 0 10px;">
      <div class="col-xs-12">
        <button type="button" class="btn btn-block btn-lg btn-default" element="{{ video.like_type }}" id="{{ video.like_id }}" like="1" model="video" like-this><i>T</i> I Like This</button>
      </div>
    </div>

    <div class="article-comments clearfix">
      <div class="comment clearfix" ng-repeat="comment in video.comments">
        <span class="glyphicon glyphicon-remove" ng-if="comment.user.id === current_user.id || video.user.id === current_user.id" model="video.comments" target="{{ comment.id }}" index="{{ $index }}" remove-wall></span>

        <a ng-href="/#/profile/{{ comment.user.slug }}">
          <div class="thumb">
            <img ng-src="{{ cdnDomain }}/{{ comment.user.thumbnail || imgPlaceholder }}" />
          </div>
        </a>

        <div class="comment-body">
          <span class="name">{{ comment.user.name }}</span><br />
          <p>{{ comment.comment }}</p>
          <span class="timestamp" am-time-ago="comment.date"></span>
        </div>
      </div>
    </div>
  </article>
</section>

<div class="compose-comment">
  <form name="AddComment" ng-submit="composeComment(AddComment, video.comments, new_comment)" novalidate>
    <div class="row-fluid">
      <div class="col-xs-10">
        <input type="text" ng-model="new_comment.comment" required />
      </div>
      <div class="col-xs-2">
        <button type="submit">Post</button>
      </div>
    </div>
  </form>
</div>